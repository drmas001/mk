"use strict";(self.webpackChunkmksap17=self.webpackChunkmksap17||[]).push([[359],{9435:function(e,t,n){n.r(t),n.d(t,{PrintAnswerSheetsApp:function(){return F}});var r=n(9266),i=n(8572),a=n(7294),o=n(3935),u=n(2950),l=n(5504),s=n(5272),c=n(1150),f=n(7226),p=n(6092),m=function(){return p.Z.Date.now()},d=n(3782),h=Math.max,b=Math.min,v=n(7855),w=n(439),y=n(620),E=Math.ceil,g=Math.max,x=function(e,t,n){t=(n?(0,w.Z)(e,t,n):void 0===t)?1:g((0,y.Z)(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,a=0,o=Array(E(r/t));i<r;)o[a++]=(0,v.Z)(e,i,i+=t);return o},k=n(9933),S=n(4184),A=n.n(S),N=n(3427),P=n(8997),T=n(44),q=n(8801),M=n(7155),C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},C.apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}l((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function O(e,t){return Z(this,void 0,void 0,(function(){return j(this,(function(n){switch(n.label){case 0:return[4,(0,c.jF)({url:"/print_answer_sheets/".concat(e,"/submit.json"),type:"POST",data:JSON.stringify({responses:t})})];case 1:return n.sent(),[2]}}))}))}var _=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,f.Z)(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(e,t,n){var r,i,a,o,u,l,s=0,c=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var n=r,a=i;return r=i=void 0,s=t,o=e.apply(a,n)}function y(e){return s=e,u=setTimeout(g,t),c?w(e):o}function E(e){var n=e-l;return void 0===l||n>=t||n<0||p&&e-s>=a}function g(){var e=m();if(E(e))return x(e);u=setTimeout(g,function(e){var n=t-(e-l);return p?b(n,a-(e-s)):n}(e))}function x(e){return u=void 0,v&&r?w(e):(r=i=void 0,o)}function k(){var e=m(),n=E(e);if(r=arguments,i=this,l=e,n){if(void 0===u)return y(l);if(p)return clearTimeout(u),u=setTimeout(g,t),w(l)}return void 0===u&&(u=setTimeout(g,t)),o}return t=(0,d.Z)(t)||0,(0,f.Z)(n)&&(c=!!n.leading,a=(p="maxWait"in n)?h((0,d.Z)(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),k.cancel=function(){void 0!==u&&clearTimeout(u),s=0,r=l=i=u=void 0},k.flush=function(){return void 0===u?o:x(m())},k}(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t){return Z(this,void 0,void 0,(function(){return j(this,(function(n){switch(n.label){case 0:return[4,(0,c.jF)({url:"/print_answer_sheets/".concat(e,".json"),type:"PATCH",data:JSON.stringify({responses:t})})];case 1:return n.sent(),[2]}}))}))}),6e4,{leading:!1,trailing:!0}),I=function(e){var t=e.questionSetId,n=e.initialResponses,r=(0,a.useState)(n||{}),i=r[0],o=r[1],c=(0,N.x)(),f=c.show,p=c.showing,m=c.hide,d=(0,a.useCallback)((function(e,n){var r,a=C(C({},i),((r={})[e]=n,r));o(a),_(t,a)}),[t,i,o]),h=(0,u.getQuestionSet)(t),b=(0,s.X)(t),v=(0,a.useMemo)((function(){return b.loaded?(0,l.m5)(t).map((function(e){return b.questionsById[e.id]})):[]}),[t,b]),w=(0,T.P)((0,a.useCallback)((function(){return Z(void 0,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return _.cancel(),[4,O(t,i)];case 1:return e.sent(),f(),[2]}}))}))}),[t,i,f])),y=w[0],E=w[1],g=(0,a.useMemo)((function(){return x(v,30)}),[v]);return b.loaded?a.createElement("div",{className:"print-answer-sheets app-screen question-theme"},a.createElement("header",{className:"navbar d-flex fixed-top bg-question-theme text-white"},a.createElement("nav",{className:"container p-3 d-flex align-items-center justify-content-between"},a.createElement("a",{href:"/print_answer_sheets",className:"btn-icon ripple m-3 btn btn-primary"},a.createElement("img",{src:(0,M.Z)("arrow-back.svg")})),a.createElement("div",{className:"text-truncate top-app-bar-text"},h.name," Transcription Answer Sheet for Print users"),a.createElement("div",null))),a.createElement("main",null,a.createElement(k.W2,{className:"my-5",fluid:"lg"},a.createElement("h1",{className:"text-question-theme"},h.name,a.createElement("br",null),"Transcription Answer Sheet for Print users"),a.createElement("div",{className:"d-md-flex align-items-center justify-content-around my-3"},a.createElement("div",{className:"mr-md-3"},"Transcribe your answers from the Print edition of MKSAP 19 into the answer sheet below. Save your answers when you are finished. Your answers here will be synced with your Question Bank answer sheet, allowing you to view your correctness and claim CME/MOC."),a.createElement(q.zx,{onClick:y,loading:E.pending},"Submit Answers")),a.createElement(k.Zb,null,a.createElement(k.Zb.Body,null,a.createElement(k.X2,null,g.map((function(e,t){return a.createElement(B,{key:t,questions:e,selectedAnswers:i,selectAnswer:d})}))))))),p&&a.createElement(R,{onHide:m})):a.createElement("div",null,"Loading...")},R=function(e){var t=e.onHide;return a.createElement(P.Vq,{show:!0,onHide:t,title:"Your answers are saved",showCloseButton:!0},"Visit ",a.createElement("a",{href:"/app"},"MKSAP 19 Digital")," to view your question results and submit for CME/MOC.")},B=function(e){var t=e.questions,n=e.selectedAnswers,r=e.selectAnswer,i=t[0],o=t[t.length-1],u=(0,a.useMemo)((function(){return x(t,10)}),[t]);return a.createElement(a.Fragment,null,a.createElement("div",{className:A()("px-5 py-3 col-12",{"border-top":i.number>1})},a.createElement("small",null,"Questions ",i.number,"-",o.number)),u.map((function(e,t){return a.createElement(k.JX,{key:t,lg:4,className:"mb-5 d-flex bubble-wrapper"},a.createElement("div",{className:"bubble-container"},e.map((function(e){return a.createElement(L,{key:e.id,question:e,selectedLetter:n[e.id],selectAnswer:r})}))))})))},L=function(e){var t=e.question,n=e.selectedLetter,r=e.selectAnswer,i=(0,a.useMemo)((function(){return t.options.length<5}),[t.options]);return a.createElement("div",{className:"bubble-row flex-nowrap"},a.createElement("div",{className:"bubble-row__number"},t.number,":"),t.options.map((function(e){var i=e.letter;return a.createElement("div",{key:i,className:A()("bubble unanswered bubble--xs",{answered:n===i}),onClick:function(){return r(t.id,i)}},i)})),i&&a.createElement("div",{className:"bubble-grid__placeholder"}))},F=function(){function e(){}return e.prototype.start=function(e,t){return n=this,i=void 0,o=function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(n){return this.questionSetId=e,this.initialResponses=t,(0,u.initializeContent)(),(0,r.E0)(this.renderApp),[2]}))},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{l(o.next(e))}catch(e){t(e)}}function u(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(r,u)}l((o=o.apply(n,i||[])).next())}));var n,i,a,o},e.prototype.renderApp=function(){this.renderElementInAppLayout(a.createElement(a.Fragment,null,a.createElement(I,{questionSetId:this.questionSetId,initialResponses:this.initialResponses}),",",a.createElement("div",{id:"modal-root"})))},e.prototype.renderElementInAppLayout=function(e){o.render(e,document.getElementById("app-layout"))},function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([i.ZP],e)}()}}]);